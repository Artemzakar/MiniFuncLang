# MiniFuncLang

**–ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —è–∑—ã–∫** –Ω–∞ F#, –≤–¥–æ—Ö–Ω–æ–≤–ª—ë–Ω–Ω—ã–π Lisp. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, —Ä–µ–∫—É—Ä—Å–∏—é, —Å–ø–∏—Å–∫–∏ –∏ –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞.

---

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
MiniFuncLang/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ Ast.fs          # –û–ø–∏—Å–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –¥–µ—Ä–µ–≤–∞ (Expr, Value, Env)
‚îÇ   ‚îú‚îÄ‚îÄ Parser.fs       # –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è –∏ —Ä–∞–∑–±–æ—Ä S-–≤—ã—Ä–∞–∂–µ–Ω–∏–π ‚Üí AST
‚îÇ   ‚îú‚îÄ‚îÄ Interpreter.fs  # –û—Ü–µ–Ω–∫–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π (eval/force), –ª–µ–Ω–∏–≤–æ—Å—Ç—å, –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ REPL.fs         # –ß—Ç–µ–Ω–∏–µ-–≤—ã–≤–æ–¥ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ, —Å–±–æ—Ä –º–Ω–æ–≥–æ—Å—Ä–æ—á–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ Program.fs      # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –≤—ã–±–æ—Ä REPL –∏–ª–∏ –∑–∞–ø—É—Å–∫ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
‚îÇ   ‚îî‚îÄ‚îÄ examples/       # –ü—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏-–æ–∂–∏–¥–∞–Ω–∏—è–º–∏
‚îú‚îÄ‚îÄ MiniFuncLang.fsproj # .NET 6 –ø—Ä–æ–µ–∫—Ç
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
```
---
–í MiniFuncLang –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –≤—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ **–ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏**: –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ (–∏–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä) –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–≤–∏—Ç—Å—è **–ø–µ—Ä–µ–¥** —Å–ø–∏—Å–∫–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –¢–∞–∫–æ–π —Å—Ç–∏–ª—å –ø—Ä–∏—à—ë–ª –∏–∑ Lisp-—Å–µ–º–µ–π—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–∞—Ä—Å–∏—Ç—å –∏ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã—Ä–∞–∂–µ–Ω–∏—è –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏–ª–∏ —Å–∫–æ–±–∫–∏ –≤–æ–∫—Ä—É–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤. –ü—Ä–∏–≤–µ–¥—ë–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤:

* –°–ª–æ–∂–µ–Ω–∏–µ –¥–≤—É—Ö —á–∏—Å–µ–ª:

  ```lisp
  (+ 1 2)        ;; –≤–º–µ—Å—Ç–æ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ 1 + 2
  ;; ‚Üí IntVal 3
  ```

* –£–º–Ω–æ–∂–µ–Ω–∏–µ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã:

  ```lisp
  (* (+ 1 2) 4)  ;; —Å–Ω–∞—á–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ–º (+ 1 2)=3, –∑–∞—Ç–µ–º (* 3 4)=12
  ;; ‚Üí IntVal 12
  ```

* –°—Ä–∞–≤–Ω–µ–Ω–∏–µ:

  ```lisp
  (< 5 10)       ;; –≤–º–µ—Å—Ç–æ 5 < 10
  ;; ‚Üí BoolVal true
  ```

–ë–ª–∞–≥–æ–¥–∞—Ä—è –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –æ—Å—Ç–∞—ë—Ç—Å—è –æ–¥–Ω–æ—Ä–æ–¥–Ω—ã–º, –ø–∞—Ä—Å–∏–Ω–≥ ‚Äî –ø—Ä–æ—Å—Ç—ã–º, –∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∏—Å–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∫–æ–±–æ–∫ –∏–ª–∏ –ø—Ä–∞–≤–∏–ª –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ ‚Äî –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ–π.

---

## üß† –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

1. **–õ–µ–Ω–∏–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è**

   * –í—Å–µ `let` –∏ `letrec` —Å–≤—è–∑—ã–≤–∞—é—Ç Thunk‚Äô–∏, –≤—ã—á–∏—Å–ª—è—é—â–∏–µ—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏.
   * –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å ‚Äûlazy-eval.mfl‚Äú, –≥–¥–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–∞–¥–∞–µ—Ç –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å, –µ—Å–ª–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ –Ω—É–∂–µ–Ω.

2. **–†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**

   * `letrec` —Å–æ–∑–¥–∞—ë—Ç –∑–∞–º—ã–∫–∞–Ω–∏–µ, —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ —Å—Å—ã–ª–∞—é—â–µ–µ—Å—è —Å–∞–º–æ –Ω–∞ —Å–µ–±—è.
   * –ü—Ä–∏–º–µ—Ä—ã: `factorial.mfl`, `fibonacci.mfl`.

3. **–°–ø–∏—Å–∫–∏**

   * –ü–æ—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ `list` ‚Üí `ListNil` –∏ —Ü–µ–ø–æ—á–∫—É `ListCons`.
   * –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ: `cons`, `head`, `tail`, `null`, `length`, `append`.

4. **–ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è**

   * `lambda` —Å–æ–∑–¥–∞—ë—Ç –æ—Ç–∑—ã–≤—á–∏–≤—ã–µ `Closure`.
   * –ú–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –≤—ã—Å—à–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: `map.mfl`, `foldl.mfl`, `compose.mfl`.

5. **–£—Å–ª–æ–≤–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è**

   * `if` —Å –±—É–ª–µ–≤–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π (`BoolVal`).
   * –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ `true`/`false`, –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã ‚Äî –æ—à–∏–±–∫–∞.

6. **–í–≤–æ–¥-–≤—ã–≤–æ–¥**

   * `print` –≤—ã–≤–æ–¥–∏—Ç –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å.
   * `read-file`/`write-file` —á–∏—Ç–∞—é—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª—ã.

7. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏**

   * –û–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω—ã–µ: –≤—Å—ë –ø–æ—Å–ª–µ `;;` –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–∞—Ä—Å–µ—Ä–æ–º.

---

## üìö –Ø–∑—ã–∫: —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```lisp
;; –ø—Ä–∏–º–µ—Ä –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
(let –∏–º—è value body)             ; –ª–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞
(letrec –∏–º—è value body)          ; —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞
(lambda (param) body)             ; –∞–Ω–æ–Ω–∏–º–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è
(ApplyFunc arg)                   ; –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
(if cond then-expr else-expr)     ; —É—Å–ª–æ–≤–∏–µ
(list a b c ...)                  ; —Å–æ–∑–¥–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞
```

### –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è      | –ê—Ä–≥—É–º–µ–Ω—Ç—ã              | –û–ø–∏—Å–∞–Ω–∏–µ                             |
| ------------ | ---------------------- | ------------------------------------ |
| `+ - * /`    | –¥–≤–∞ `IntVal`           | –ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞, `/` –±—Ä–æ—Å–∞–µ—Ç –æ—à–∏–±–∫—É –ø—Ä–∏ 0 |
| `=`          | –¥–≤–∞ `IntVal`/`BoolVal` | –†–∞–≤–µ–Ω—Å—Ç–≤–æ                            |
| `<`          | –¥–≤–∞ `IntVal`           | –ú–µ–Ω—å—à–µ                               |
| `print`      | –ª—é–±–æ–π `Value`          | –í—ã–≤–æ–¥–∏—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç        |
| `read-file`  | `StringVal`            | –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `StringVal`  |
| `write-file` | –¥–≤–∞ `StringVal`        | –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ —Ñ–∞–π–ª, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Ç—å   |
| `list`       | N –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤           | –°—Ç—Ä–æ–∏—Ç —Å–ø–∏—Å–æ–∫                        |
| `cons`       | `(x, [x])`             | –î–æ–±–∞–≤–ª—è–µ—Ç —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–∞—á–∞–ª–æ —Å–ø–∏—Å–∫–∞    |
| `head`       | `[x]`                  | –ü–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞                |
| `tail`       | `[x]`                  | –•–≤–æ—Å—Ç —Å–ø–∏—Å–∫–∞                         |
| `null`       | `[x]`                  | `BoolVal true`, –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç     |
| `length`     | `[x]`                  | –î–ª–∏–Ω–∞ —Å–ø–∏—Å–∫–∞ (`IntVal`)              |
| `append`     | –¥–≤–∞ —Å–ø–∏—Å–∫–∞             | –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è                         |

---

## üìÇ –ü—Ä–∏–º–µ—Ä—ã (–≤ `src/examples/`)

–ö–∞–∂–¥—ã–π —Ñ–∞–π–ª –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞–∫:

```bash
dotnet run --project MiniFuncLang.fsproj src/examples/<–∏–º—è>.mfl
```

| –§–∞–π–ª                     | –û–ø–∏—Å–∞–Ω–∏–µ                              | –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥                  |
| ------------------------ | ------------------------------------- | -------------------------------- |
| `compose.mfl`            | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ–º–ø–æ–∑–∏—Ü–∏—è             | `IntVal 12`                      |
| `factorial.mfl`          | –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π —Ñ–∞–∫—Ç–æ—Ä–∏–∞–ª                 | `IntVal 3628800`                 |
| `fibonacci.mfl`          | –ß–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏                       | `IntVal 55`                      |
| `file_test.mfl`          | –ó–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞                 | `StringVal "42"`                 |
| `filter-positive.mfl`    | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö —á–∏—Å–µ–ª        | `ListVal [IntVal 4; IntVal 5]`   |
| `foldl.mfl`              | –õ–µ–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Å–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞      | `IntVal 15`                      |
| `hello.mfl`              | –ó–∞–ø–∏—Å—å —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª                  | `StringVal "test.txt"`           |
| `lazy-eval.mfl`          | –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ª–µ–Ω–∏–≤–æ—Å—Ç–∏                | `IntVal 42`                      |
| `list-comprehension.mfl` | –ö–≤–∞–¥—Ä–∞—Ç—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞             | `ListVal [IntVal 1;‚Ä¶;IntVal 25]` |
| `map.mfl`                | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫ –∫–∞–∂–¥–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É | `ListVal [IntVal 2;‚Ä¶;IntVal 10]` |

---

## üöÄ –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

–ù–∞—Ö–æ–¥—è—Å—å –≤ –ø–∞–ø–∫–µ src, –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–∞–Ω–¥—ã:

1. **–°–±–æ—Ä–∫–∞**

   ```bash
   dotnet build MiniFuncLang.fsproj
   ```

2. **REPL**

   ```bash
   dotnet run --project MiniFuncLang.fsproj
   ```

   ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–∂–∏–º, –≤–≤–æ–¥–∏—Ç–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, `quit` –¥–ª—è –≤—ã—Ö–æ–¥–∞.

3. **–ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞**

   ```bash
   dotnet run --project MiniFuncLang.fsproj examples/factorial.mfl
   ```